{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/voyage.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","THREE","WEBGL","isWebGLAvailable","document","body","appendChild","getWebGLErrorMessage","container","camera","scene","renderer","light","controls","water","onWindowResize","aspect","innerWidth","innerHeight","updateProjectionMatrix","setSize","getElementById","WebGLRenderer","setPixelRatio","devicePixelRatio","domElement","Scene","PerspectiveCamera","position","set","DirectionalLight","add","waterGeometry","PlaneBufferGeometry","Water","textureWidth","textureHeight","waterNormals","TextureLoader","load","texture","wrapS","wrapT","RepeatWrapping","alpha","sunDirection","clone","normalize","sunColor","waterColor","distortionScale","fog","undefined","rotation","x","Math","PI","sky","Sky","scale","setScalar","uniforms","material","parameters","distance","inclination","azimuth","cubeCamera","CubeCamera","renderTarget","generateMipmaps","minFilter","LinearMipMapLinearFilter","theta","phi","cos","y","sin","z","copy","update","geometry","IcosahedronBufferGeometry","count","attributes","colors","color","Color","setHex","random","push","g","b","addAttribute","Float32BufferAttribute","OrbitControls","maxPolarAngle","target","minDistance","maxDistance","lookAt","addEventListener","init","animate","requestAnimationFrame","render"],"mappings":"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","file":"js/voyage.bfd8ea5637551b4f105f.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"https://raddeana-admin.oss-cn-hangzhou.aliyuncs.com/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"KzPL\");\n","/**\n * 海盗\n * @author Philip\n */\nconst THREE = window.THREE\nconst WEBGL = window.WEBGL\n\nif (WEBGL.isWebGLAvailable() === false) {\n    document.body.appendChild(WEBGL.getWebGLErrorMessage())\n}\n\nlet container\nlet camera, scene, renderer, light\nlet controls, water\n\ninit()\nanimate()\n\nfunction init () {\n    container = document.getElementById('container')\n\n    // 渲染器\n    renderer = new THREE.WebGLRenderer()\n    renderer.setPixelRatio(window.devicePixelRatio)\n    renderer.setSize(window.innerWidth, window.innerHeight)\n    container.appendChild(renderer.domElement)\n\n    // 场景\n    scene = new THREE.Scene()\n\n    // 摄像头\n    camera = new THREE.PerspectiveCamera(55, window.innerWidth / window.innerHeight, 1, 20000)\n    camera.position.set(30, 30, 100)\n\n    // 光源\n    light = new THREE.DirectionalLight(0xffffff, 0.8)\n    scene.add(light)\n\n    // Water\n    let waterGeometry = new THREE.PlaneBufferGeometry(10000, 10000)\n\n    water = new THREE.Water(waterGeometry, {\n        textureWidth: 512,\n        textureHeight: 512,\n        waterNormals: new THREE.TextureLoader().load('https://raddeana-materials.oss-cn-hangzhou.aliyuncs.com/images/chartlets/waternormals.jpg', function (texture) {\n            texture.wrapS = texture.wrapT = THREE.RepeatWrapping\n        }),\n        alpha: 1.0,\n        sunDirection: light.position.clone().normalize(),\n        sunColor: 0xffffff,\n        waterColor: 0x001e0f,\n        distortionScale: 3.7,\n        fog: scene.fog !== undefined\n    })\n\n    water.rotation.x = -Math.PI / 2\n    scene.add(water)\n\n    // Skybox\n    let sky = new THREE.Sky()\n    sky.scale.setScalar(10000)\n    scene.add(sky)\n\n    let uniforms = sky.material.uniforms\n\n    uniforms['turbidity'].value = 10\n    uniforms['rayleigh'].value = 2\n    uniforms['luminance'].value = 1\n    uniforms['mieCoefficient'].value = 0.005\n    uniforms['mieDirectionalG'].value = 0.8\n\n    let parameters = {\n        distance: 400,\n        inclination: 0.49,\n        azimuth: 0.205\n    }\n\n    let cubeCamera = new THREE.CubeCamera(1, 20000, 256)\n    cubeCamera.renderTarget.texture.generateMipmaps = true\n    cubeCamera.renderTarget.texture.minFilter = THREE.LinearMipMapLinearFilter\n\n    function updateSun () {\n        let theta = Math.PI * (parameters.inclination - 0.5)\n        let phi = 2 * Math.PI * (parameters.azimuth - 0.5)\n\n        light.position.x = parameters.distance * Math.cos(phi)\n        light.position.y = parameters.distance * Math.sin(phi) * Math.sin(theta)\n        light.position.z = parameters.distance * Math.sin(phi) * Math.cos(theta)\n\n        sky.material.uniforms['sunPosition'].value = light.position.copy(light.position)\n        water.material.uniforms['sunDirection'].value.copy(light.position).normalize()\n\n        cubeCamera.update(renderer, scene)\n    }\n\n    updateSun()\n\n    let geometry = new THREE.IcosahedronBufferGeometry(20, 1)\n    let count = geometry.attributes.position.count\n\n    let colors = []\n    let color = new THREE.Color()\n\n    for (let i = 0; i < count; i += 3) {\n        color.setHex(Math.random() * 0xffffff)\n\n        colors.push(color.r, color.g, color.b)\n        colors.push(color.r, color.g, color.b)\n        colors.push(color.r, color.g, color.b)\n    }\n\n    geometry.addAttribute('color', new THREE.Float32BufferAttribute(colors, 3))\n\n    // 控制器\n    controls = new THREE.OrbitControls(camera, renderer.domElement)\n    controls.maxPolarAngle = Math.PI * 0.495\n    controls.target.set(0, 10, 0)\n    controls.minDistance = 40.0\n    controls.maxDistance = 200.0\n    camera.lookAt(controls.target)\n\n    // 窗口大小变化\n    window.addEventListener('resize', onWindowResize, false)\n}\n\nfunction onWindowResize () {\n    camera.aspect = window.innerWidth / window.innerHeight\n    camera.updateProjectionMatrix()\n\n    renderer.setSize(window.innerWidth, window.innerHeight)\n}\n\nfunction animate () {\n    water.material.uniforms['time'].value += 1.0 / 60.0\n\n    requestAnimationFrame(animate)\n    render()\n}\n\nfunction render () {\n    renderer.render(scene, camera)\n}\n"],"sourceRoot":""}